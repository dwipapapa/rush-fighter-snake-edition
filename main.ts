namespace SpriteKind {
    export const EnemyProjectile = SpriteKind.create()
    export const Decoration = SpriteKind.create()
}
controller.up.onEvent(ControllerButtonEvent.Pressed, function () {
    Curder = 2
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.EnemyProjectile, function (sprite, otherSprite) {
    otherSprite.destroy()
    statusbar.value += -1
})
function Wave2 () {
    Wave += 1
    for (let index = 0; index < 8 * Wave; index++) {
        mySprite2 = sprites.create(img`
            . . . . c c c c c c . . . . . . 
            . . . c 6 7 7 7 7 6 c . . . . . 
            . . c 7 7 7 7 7 7 7 7 c . . . . 
            . c 6 7 7 7 7 7 7 7 7 6 c . . . 
            . c 7 f f 6 6 f f 7 7 7 c . . . 
            . f 7 6 6 6 6 6 6 7 7 7 f . . . 
            . f 7 7 7 7 7 7 7 7 7 7 f . . . 
            . . f 7 7 7 7 6 c 7 7 6 f c . . 
            . . . f c c c c 7 7 6 f 7 7 c . 
            . . c 7 2 7 7 7 6 c f 7 7 7 7 c 
            . c 7 7 2 7 7 c f c 6 7 7 6 c c 
            c 1 1 1 1 7 6 f c c 6 6 6 c . . 
            f 1 1 1 1 1 6 6 c 6 6 6 6 f . . 
            f 6 1 1 1 1 1 6 6 6 6 6 c f . . 
            . f 6 1 1 1 1 1 1 6 6 6 f . . . 
            . . c c c c c c c c c f . . . . 
            `, SpriteKind.Enemy)
        sprites.setDataBoolean(mySprite2, "Woke up", false)
        animation.runImageAnimation(
        mySprite2,
        [img`
            ....................
            ..............fffff.
            .................f..
            ................f...
            ....cccccc.....f....
            ...c677776c...fffff.
            ..c77777777c........
            .c6777777776c.......
            .c7ff66ff777c.......
            .f7666666777f.......
            .f7777777777f.......
            ..f77776c776fc......
            ...fcccc776f77c.....
            ..c727776cf7777c....
            .c77277cfc6776cc....
            c111176fcc666c......
            f1111166c6666f......
            f61111166666cf......
            .f6111111666f.......
            ..cccccccccf........
            `,img`
            ....................
            ....................
            .............ffff...
            ...............f....
            ...cccccc.....f.....
            ..c677776c...ffff...
            .c77777777c.........
            c6777777776c........
            c7ff66ff777c........
            f7666666777f........
            f7777777777f........
            .f77776c776f........
            ..fcccc776fccc......
            ..c62777fcc777c.....
            .c677277cf67777c....
            .c1111766c666ccc....
            .c11111666666c......
            .c61111166666c......
            ..c611111766cc......
            ...cccccccccc.......
            `],
        1000,
        true
        )
        Place_on_random(mySprite2)
    }
    game.splash("Wave:", convertToText(Wave))
}
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (started) {
        projectile = sprites.createProjectileFromSprite(img`
            . . 1 f f 1 . . 
            . 9 f f f f 9 . 
            1 f c f f c f 1 
            f f f 9 9 f f f 
            f f f 9 9 f f f 
            1 f c f f c f 1 
            . 9 f f f f 9 . 
            . . 1 f f 1 . . 
            `, mySprite, 0, 0)
        if (Curder == 0) {
            projectile.vx = 0 - Speed_of_Projecile
        } else if (Curder == 1) {
            projectile.vx = Speed_of_Projecile
        } else if (Curder == 2) {
            projectile.vy = 0 - Speed_of_Projecile
        } else {
            projectile.vy = Speed_of_Projecile
        }
    } else {
        mySprite3.destroy()
        intro()
        story.startCutscene(function () {
            Speed_of_Projecile = 150
            scene.setBackgroundColor(7)
            mySprite = sprites.create(img`
                . . . . . . f f f f . . . . . . 
                . . . . f f f 2 2 f f f . . . . 
                . . . f f f 2 2 2 2 f f f . . . 
                . . f f f e e e e e e f f f . . 
                . . f f e 2 2 2 2 2 2 e e f . . 
                . . f e 2 f f f f f f 2 e f . . 
                . . f f f f e e e e f f f f . . 
                . f f e f b f 4 4 f b f e f f . 
                . f e e 4 1 f d d f 1 4 e e f . 
                . . f e e d d d d d d e e f . . 
                . . . f e e 4 4 4 4 e e f . . . 
                . . e 4 f 2 2 2 2 2 2 f 4 e . . 
                . . 4 d f 2 2 2 2 2 2 f d 4 . . 
                . . 4 4 f 4 4 5 5 4 4 f 4 4 . . 
                . . . . . f f f f f f . . . . . 
                . . . . . f f . . f f . . . . . 
                `, SpriteKind.Player)
            scene.cameraFollowSprite(mySprite)
            tiles.setTilemap(tilemap`level1`)
            Place_on_random(mySprite)
            controller.moveSprite(mySprite)
            lantern.startLanternEffect(mySprite)
            lantern.setLightBandWidth(30)
            character.loopFrames(
            mySprite,
            [img`
                . . . . . . f f f f . . . . . . 
                . . . . f f f 2 2 f f f . . . . 
                . . . f f f 2 2 2 2 f f f . . . 
                . . f f f e e e e e e f f f . . 
                . . f f e 2 2 2 2 2 2 e e f . . 
                . . f e 2 f f f f f f 2 e f . . 
                . . f f f f e e e e f f f f . . 
                . f f e f b f 4 4 f b f e f f . 
                . f e e 4 1 f d d f 1 4 e e f . 
                . . f e e d d d d d d e e f . . 
                . . . f e e 4 4 4 4 e e f . . . 
                . . e 4 f 2 2 2 2 2 2 f 4 e . . 
                . . 4 d f 2 2 2 2 2 2 f d 4 . . 
                . . 4 4 f 4 4 5 5 4 4 f 4 4 . . 
                . . . . . f f f f f f . . . . . 
                . . . . . f f . . f f . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . f f f f . . . . . . 
                . . . . f f f 2 2 f f f . . . . 
                . . . f f f 2 2 2 2 f f f . . . 
                . . f f f e e e e e e f f f . . 
                . . f f e 2 2 2 2 2 2 e e f . . 
                . f f e 2 f f f f f f 2 e f f . 
                . f f f f f e e e e f f f f f . 
                . . f e f b f 4 4 f b f e f . . 
                . . f e 4 1 f d d f 1 4 e f . . 
                . . . f e 4 d d d d 4 e f e . . 
                . . f e f 2 2 2 2 e d d 4 e . . 
                . . e 4 f 2 2 2 2 e d d e . . . 
                . . . . f 4 4 5 5 f e e . . . . 
                . . . . f f f f f f f . . . . . 
                . . . . f f f . . . . . . . . . 
                `,img`
                . . . . . . f f f f . . . . . . 
                . . . . f f f 2 2 f f f . . . . 
                . . . f f f 2 2 2 2 f f f . . . 
                . . f f f e e e e e e f f f . . 
                . . f f e 2 2 2 2 2 2 e e f . . 
                . . f e 2 f f f f f f 2 e f . . 
                . . f f f f e e e e f f f f . . 
                . f f e f b f 4 4 f b f e f f . 
                . f e e 4 1 f d d f 1 4 e e f . 
                . . f e e d d d d d d e e f . . 
                . . . f e e 4 4 4 4 e e f . . . 
                . . e 4 f 2 2 2 2 2 2 f 4 e . . 
                . . 4 d f 2 2 2 2 2 2 f d 4 . . 
                . . 4 4 f 4 4 5 5 4 4 f 4 4 . . 
                . . . . . f f f f f f . . . . . 
                . . . . . f f . . f f . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . f f f f . . . . . . 
                . . . . f f f 2 2 f f f . . . . 
                . . . f f f 2 2 2 2 f f f . . . 
                . . f f f e e e e e e f f f . . 
                . . f e e 2 2 2 2 2 2 e f f . . 
                . f f e 2 f f f f f f 2 e f f . 
                . f f f f f e e e e f f f f f . 
                . . f e f b f 4 4 f b f e f . . 
                . . f e 4 1 f d d f 1 4 e f . . 
                . . e f e 4 d d d d 4 e f . . . 
                . . e 4 d d e 2 2 2 2 f e f . . 
                . . . e d d e 2 2 2 2 f 4 e . . 
                . . . . e e f 5 5 4 4 f . . . . 
                . . . . . f f f f f f f . . . . 
                . . . . . . . . . f f f . . . . 
                `],
            100,
            character.rule(Predicate.MovingDown)
            )
            character.loopFrames(
            mySprite,
            [img`
                . . . . . . f f f f . . . . . . 
                . . . . f f e e e e f f . . . . 
                . . . f e e e f f e e e f . . . 
                . . f f f f f 2 2 f f f f f . . 
                . . f f e 2 e 2 2 e 2 e f f . . 
                . . f e 2 f 2 f f 2 f 2 e f . . 
                . . f f f 2 2 e e 2 2 f f f . . 
                . f f e f 2 f e e f 2 f e f f . 
                . f e e f f e e e e f e e e f . 
                . . f e e e e e e e e e e f . . 
                . . . f e e e e e e e e f . . . 
                . . e 4 f f f f f f f f 4 e . . 
                . . 4 d f 2 2 2 2 2 2 f d 4 . . 
                . . 4 4 f 4 4 4 4 4 4 f 4 4 . . 
                . . . . . f f f f f f . . . . . 
                . . . . . f f . . f f . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . f f f f . . . . . . 
                . . . . f f e e e e f f . . . . 
                . . . f e e e f f e e e f . . . 
                . . . f f f f 2 2 f f f f . . . 
                . . f f e 2 e 2 2 e 2 e f f . . 
                . . f e 2 f 2 f f f 2 f e f . . 
                . . f f f 2 f e e 2 2 f f f . . 
                . . f e 2 f f e e 2 f e e f . . 
                . f f e f f e e e f e e e f f . 
                . f f e e e e e e e e e e f f . 
                . . . f e e e e e e e e f . . . 
                . . . e f f f f f f f f 4 e . . 
                . . . 4 f 2 2 2 2 2 e d d 4 . . 
                . . . e f f f f f f e e 4 . . . 
                . . . . f f f . . . . . . . . . 
                `,img`
                . . . . . . f f f f . . . . . . 
                . . . . f f e e e e f f . . . . 
                . . . f e e e f f e e e f . . . 
                . . f f f f f 2 2 f f f f f . . 
                . . f f e 2 e 2 2 e 2 e f f . . 
                . . f e 2 f 2 f f 2 f 2 e f . . 
                . . f f f 2 2 e e 2 2 f f f . . 
                . f f e f 2 f e e f 2 f e f f . 
                . f e e f f e e e e f e e e f . 
                . . f e e e e e e e e e e f . . 
                . . . f e e e e e e e e f . . . 
                . . e 4 f f f f f f f f 4 e . . 
                . . 4 d f 2 2 2 2 2 2 f d 4 . . 
                . . 4 4 f 4 4 4 4 4 4 f 4 4 . . 
                . . . . . f f f f f f . . . . . 
                . . . . . f f . . f f . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . f f f f . . . . . . 
                . . . . f f e e e e f f . . . . 
                . . . f e e e f f e e e f . . . 
                . . . f f f f 2 2 f f f f . . . 
                . . f f e 2 e 2 2 e 2 e f f . . 
                . . f e f 2 f f f 2 f 2 e f . . 
                . . f f f 2 2 e e f 2 f f f . . 
                . . f e e f 2 e e f f 2 e f . . 
                . f f e e e f e e e f f e f f . 
                . f f e e e e e e e e e e f f . 
                . . . f e e e e e e e e f . . . 
                . . e 4 f f f f f f f f e . . . 
                . . 4 d d e 2 2 2 2 2 f 4 . . . 
                . . . 4 e e f f f f f f e . . . 
                . . . . . . . . . f f f . . . . 
                `],
            100,
            character.rule(Predicate.MovingUp)
            )
            character.loopFrames(
            mySprite,
            [img`
                . . . . . . f f f f f f . . . . 
                . . . . f f e e e e f 2 f . . . 
                . . . f f e e e e f 2 2 2 f . . 
                . . . f e e e f f e e e e f . . 
                . . . f f f f e e 2 2 2 2 e f . 
                . . . f e 2 2 2 f f f f e 2 f . 
                . . f f f f f f f e e e f f f . 
                . . f f e 4 4 e b f 4 4 e e f . 
                . . f e e 4 d 4 1 f d d e f . . 
                . . . f e e e 4 d d d d f . . . 
                . . . . f f e e 4 4 4 e f . . . 
                . . . . . 4 d d e 2 2 2 f . . . 
                . . . . . e d d e 2 2 2 f . . . 
                . . . . . f e e f 4 5 5 f . . . 
                . . . . . . f f f f f f . . . . 
                . . . . . . . f f f . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . f f f f f f . . . . 
                . . . . f f e e e e f 2 f . . . 
                . . . f f e e e e f 2 2 2 f . . 
                . . . f e e e f f e e e e f . . 
                . . . f f f f e e 2 2 2 2 e f . 
                . . . f e 2 2 2 f f f f e 2 f . 
                . . f f f f f f f e e e f f f . 
                . . f f e 4 4 e b f 4 4 e e f . 
                . . f e e 4 d 4 1 f d d e f . . 
                . . . f e e e e e d d d f . . . 
                . . . . . f 4 d d e 4 e f . . . 
                . . . . . f e d d e 2 2 f . . . 
                . . . . f f f e e f 5 5 f f . . 
                . . . . f f f f f f f f f f . . 
                . . . . . f f . . . f f f . . . 
                `,img`
                . . . . . . f f f f f f . . . . 
                . . . . f f e e e e f 2 f . . . 
                . . . f f e e e e f 2 2 2 f . . 
                . . . f e e e f f e e e e f . . 
                . . . f f f f e e 2 2 2 2 e f . 
                . . . f e 2 2 2 f f f f e 2 f . 
                . . f f f f f f f e e e f f f . 
                . . f f e 4 4 e b f 4 4 e e f . 
                . . f e e 4 d 4 1 f d d e f . . 
                . . . f e e e 4 d d d d f . . . 
                . . . . f f e e 4 4 4 e f . . . 
                . . . . . 4 d d e 2 2 2 f . . . 
                . . . . . e d d e 2 2 2 f . . . 
                . . . . . f e e f 4 5 5 f . . . 
                . . . . . . f f f f f f . . . . 
                . . . . . . . f f f . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . f f f f f f . . . . 
                . . . . f f e e e e f 2 f . . . 
                . . . f f e e e e f 2 2 2 f . . 
                . . . f e e e f f e e e e f . . 
                . . . f f f f e e 2 2 2 2 e f . 
                . . . f e 2 2 2 f f f f e 2 f . 
                . . f f f f f f f e e e f f f . 
                . . f f e 4 4 e b f 4 4 e e f . 
                . . f e e 4 d 4 1 f d d e f . . 
                . . . f e e e 4 d d d d f . . . 
                . . . . 4 d d e 4 4 4 e f . . . 
                . . . . e d d e 2 2 2 2 f . . . 
                . . . . f e e f 4 4 5 5 f f . . 
                . . . . f f f f f f f f f f . . 
                . . . . . f f . . . f f f . . . 
                `],
            100,
            character.rule(Predicate.MovingRight)
            )
            character.loopFrames(
            mySprite,
            [img`
                . . . . f f f f f f . . . . . . 
                . . . f 2 f e e e e f f . . . . 
                . . f 2 2 2 f e e e e f f . . . 
                . . f e e e e f f e e e f . . . 
                . f e 2 2 2 2 e e f f f f . . . 
                . f 2 e f f f f 2 2 2 e f . . . 
                . f f f e e e f f f f f f f . . 
                . f e e 4 4 f b e 4 4 e f f . . 
                . . f e d d f 1 4 d 4 e e f . . 
                . . . f d d d d 4 e e e f . . . 
                . . . f e 4 4 4 e e f f . . . . 
                . . . f 2 2 2 e d d 4 . . . . . 
                . . . f 2 2 2 e d d e . . . . . 
                . . . f 5 5 4 f e e f . . . . . 
                . . . . f f f f f f . . . . . . 
                . . . . . . f f f . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . f f f f f f . . . . . . 
                . . . f 2 f e e e e f f . . . . 
                . . f 2 2 2 f e e e e f f . . . 
                . . f e e e e f f e e e f . . . 
                . f e 2 2 2 2 e e f f f f . . . 
                . f 2 e f f f f 2 2 2 e f . . . 
                . f f f e e e f f f f f f f . . 
                . f e e 4 4 f b e 4 4 e f f . . 
                . . f e d d f 1 4 d 4 e e f . . 
                . . . f d d d e e e e e f . . . 
                . . . f e 4 e d d 4 f . . . . . 
                . . . f 2 2 e d d e f . . . . . 
                . . f f 5 5 f e e f f f . . . . 
                . . f f f f f f f f f f . . . . 
                . . . f f f . . . f f . . . . . 
                `,img`
                . . . . f f f f f f . . . . . . 
                . . . f 2 f e e e e f f . . . . 
                . . f 2 2 2 f e e e e f f . . . 
                . . f e e e e f f e e e f . . . 
                . f e 2 2 2 2 e e f f f f . . . 
                . f 2 e f f f f 2 2 2 e f . . . 
                . f f f e e e f f f f f f f . . 
                . f e e 4 4 f b e 4 4 e f f . . 
                . . f e d d f 1 4 d 4 e e f . . 
                . . . f d d d d 4 e e e f . . . 
                . . . f e 4 4 4 e e f f . . . . 
                . . . f 2 2 2 e d d 4 . . . . . 
                . . . f 2 2 2 e d d e . . . . . 
                . . . f 5 5 4 f e e f . . . . . 
                . . . . f f f f f f . . . . . . 
                . . . . . . f f f . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . f f f f f f . . . . . . 
                . . . f 2 f e e e e f f . . . . 
                . . f 2 2 2 f e e e e f f . . . 
                . . f e e e e f f e e e f . . . 
                . f e 2 2 2 2 e e f f f f . . . 
                . f 2 e f f f f 2 2 2 e f . . . 
                . f f f e e e f f f f f f f . . 
                . f e e 4 4 f b e 4 4 e f f . . 
                . . f e d d f 1 4 d 4 e e f . . 
                . . . f d d d d 4 e e e f . . . 
                . . . f e 4 4 4 e d d 4 . . . . 
                . . . f 2 2 2 2 e d d e . . . . 
                . . f f 5 5 4 4 f e e f . . . . 
                . . f f f f f f f f f f . . . . 
                . . . f f f . . . f f . . . . . 
                `],
            100,
            character.rule(Predicate.MovingLeft)
            )
            character.runFrames(
            mySprite,
            [img`
                . . . . . . f f f f . . . . . . 
                . . . . f f f 2 2 f f f . . . . 
                . . . f f f 2 2 2 2 f f f . . . 
                . . f f f e e e e e e f f f . . 
                . . f f e 2 2 2 2 2 2 e e f . . 
                . . f e 2 f f f f f f 2 e f . . 
                . . f f f f e e e e f f f f . . 
                . f f e f b f 4 4 f b f e f f . 
                . f e e 4 1 f d d f 1 4 e e f . 
                . . f e e d d d d d d e e f . . 
                . . . f e e 4 4 4 4 e e f . . . 
                . . e 4 f 2 2 2 2 2 2 f 4 e . . 
                . . 4 d f 2 2 2 2 2 2 f d 4 . . 
                . . 4 4 f 4 4 5 5 4 4 f 4 4 . . 
                . . . . . f f f f f f . . . . . 
                . . . . . f f . . f f . . . . . 
                `],
            500,
            character.rule(Predicate.FacingDown, Predicate.NotMoving)
            )
            character.runFrames(
            mySprite,
            [img`
                . . . . . . f f f f . . . . . . 
                . . . . f f e e e e f f . . . . 
                . . . f e e e f f e e e f . . . 
                . . f f f f f 2 2 f f f f f . . 
                . . f f e 2 e 2 2 e 2 e f f . . 
                . . f e 2 f 2 f f 2 f 2 e f . . 
                . . f f f 2 2 e e 2 2 f f f . . 
                . f f e f 2 f e e f 2 f e f f . 
                . f e e f f e e e e f e e e f . 
                . . f e e e e e e e e e e f . . 
                . . . f e e e e e e e e f . . . 
                . . e 4 f f f f f f f f 4 e . . 
                . . 4 d f 2 2 2 2 2 2 f d 4 . . 
                . . 4 4 f 4 4 4 4 4 4 f 4 4 . . 
                . . . . . f f f f f f . . . . . 
                . . . . . f f . . f f . . . . . 
                `],
            500,
            character.rule(Predicate.FacingUp, Predicate.NotMoving)
            )
            character.runFrames(
            mySprite,
            [img`
                . . . . . . f f f f f f . . . . 
                . . . . f f e e e e f 2 f . . . 
                . . . f f e e e e f 2 2 2 f . . 
                . . . f e e e f f e e e e f . . 
                . . . f f f f e e 2 2 2 2 e f . 
                . . . f e 2 2 2 f f f f e 2 f . 
                . . f f f f f f f e e e f f f . 
                . . f f e 4 4 e b f 4 4 e e f . 
                . . f e e 4 d 4 1 f d d e f . . 
                . . . f e e e 4 d d d d f . . . 
                . . . . f f e e 4 4 4 e f . . . 
                . . . . . 4 d d e 2 2 2 f . . . 
                . . . . . e d d e 2 2 2 f . . . 
                . . . . . f e e f 4 5 5 f . . . 
                . . . . . . f f f f f f . . . . 
                . . . . . . . f f f . . . . . . 
                `],
            500,
            character.rule(Predicate.FacingRight, Predicate.NotMoving)
            )
            character.runFrames(
            mySprite,
            [img`
                . . . . f f f f f f . . . . . . 
                . . . f 2 f e e e e f f . . . . 
                . . f 2 2 2 f e e e e f f . . . 
                . . f e e e e f f e e e f . . . 
                . f e 2 2 2 2 e e f f f f . . . 
                . f 2 e f f f f 2 2 2 e f . . . 
                . f f f e e e f f f f f f f . . 
                . f e e 4 4 f b e 4 4 e f f . . 
                . . f e d d f 1 4 d 4 e e f . . 
                . . . f d d d d 4 e e e f . . . 
                . . . f e 4 4 4 e e f f . . . . 
                . . . f 2 2 2 e d d 4 . . . . . 
                . . . f 2 2 2 e d d e . . . . . 
                . . . f 5 5 4 f e e f . . . . . 
                . . . . f f f f f f . . . . . . 
                . . . . . . f f f . . . . . . . 
                `],
            500,
            character.rule(Predicate.FacingLeft, Predicate.NotMoving)
            )
            statusbar = statusbars.create(22, 4, StatusBarKind.Health)
            statusbar.setBarBorder(1, 12)
            statusbar.attachToSprite(mySprite)
            statusbar.max = 100
            started = true
            Wave2()
        })
    }
})
function intro () {
    story.startCutscene(function () {
        story.printDialog("Aaaaa!!!", 80, 90, 50, 150)
        story.printDialog("Where am I?", 80, 90, 50, 150)
        story.printDialog("Is that a snake!!!", 80, 90, 50, 150)
        story.printDialog("I've gotta get outta here!", 80, 90, 50, 150)
        story.printDialog("at least I still can shoot them...", 80, 90, 50, 150)
    })
}
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    Curder = 0
})
statusbars.onZero(StatusBarKind.Health, function (status) {
    game.over(false)
})
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    Curder = 1
})
controller.down.onEvent(ControllerButtonEvent.Pressed, function () {
    Curder = 3
})
controller.A.onEvent(ControllerButtonEvent.Repeated, function () {
    projectile = sprites.createProjectileFromSprite(img`
        . . 1 f f 1 . . 
        . 9 a f f a 9 . 
        1 a 2 a a 2 a 1 
        f f a b b a f f 
        f f a b b a f f 
        1 a 2 a a 2 a 1 
        . 9 a f f a 9 . 
        . . 1 f f 1 . . 
        `, mySprite, 0, 0)
    if (Curder == 0) {
        projectile.vx = 0 - Speed_of_Projecile
    } else if (Curder == 1) {
        projectile.vx = Speed_of_Projecile
    } else if (Curder == 2) {
        projectile.vy = 0 - Speed_of_Projecile
    } else {
        projectile.vy = Speed_of_Projecile
    }
    pause(150)
})
function Place_on_random (mySprite: Sprite) {
    tiles.placeOnRandomTile(mySprite, sprites.castle.tileGrass1)
    if (Math.percentChance(50)) {
        tiles.placeOnRandomTile(mySprite, sprites.castle.tileGrass3)
    } else if (Math.percentChance(50)) {
        tiles.placeOnRandomTile(mySprite, sprites.castle.tileGrass2)
    }
}
sprites.onOverlap(SpriteKind.Projectile, SpriteKind.Enemy, function (sprite, otherSprite) {
    otherSprite.destroy(effects.rings, 500)
    info.changeScoreBy(1)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Enemy, function (sprite, otherSprite) {
    otherSprite.destroy()
    for (let index = 0; index < randint(2, 12); index++) {
        pause(1000)
        statusbar.value += -1
        scene.cameraShake(5, 200)
    }
})
let projectile2: Sprite = null
let Speed_of_Projecile = 0
let mySprite: Sprite = null
let projectile: Sprite = null
let mySprite2: Sprite = null
let Wave = 0
let statusbar: StatusBarSprite = null
let Curder = 0
let mySprite3: Sprite = null
let started = false
started = false
mySprite3 = sprites.create(img`
    ................................................................................................................................................................
    ................................111.............................................................................................................................
    ...............................11111111.........................................................................................................................
    ...............................1111111111.......................................................................................................................
    ..............................111111111111...............................................111....................................................................
    .............................11111111111111..............................................111....................................................................
    ............................11111......11111.............................................111....................................................................
    ...........................11111........1111.............................................111....................................................................
    ..........................11111..........111.............................................111....................................................................
    .........................11111...........111.............................................111....................................................................
    .........................1111............111............................................1111....................................................................
    ........................1111.............111............................................1111....................................................................
    .......................11111.............111............................................111.....................................................................
    .......................1111..............111............................................111.....................................................................
    ......................1111..............1111............................................111.....................................................................
    .....................11111.............11111............................................111.....................................................................
    .....................1111.............11111.............................................111.....................................................................
    ....................1111.............11111..............................................111.....................................................................
    ...................11111..........1111111..............................................1111.....................................................................
    ...................111111111111111111111...............................................1111.....................................................................
    ..................111111111111111111111.........1111.....................11111111......111.....1111.............................................................
    .................1111111111111111111............1111....................111111111......111...11111111...........................................................
    ................1111111111.....................11111.......111.........1111111111......111..1111111111..........................................................
    ...............11111..11111....................1111........1111........1111...........1111111111111111..........................................................
    ..............11111....11111...................111.........1111........11111..........111111111...11111.........................................................
    .............11111......11111..................111.........11111.......111111.........11111111.....1111.........................................................
    ............11111........1111..................111........111111........1111111.......111111........111.........................................................
    ..........111111..........1111.................1111.......1111111.........111111.....1111111........111.........................................................
    .......11111111...........11111................11111......1111111..........1111111...111111.........111.........................................................
    .......1111111.............11111................11111...1111111111...........11111...11111..........111.........................................................
    .......11111................1111.................111111111111.1111............11111..11111..........1111........................................................
    .............................111..................1111111111...111.............1111..1111...........1111........................................................
    .................1111........111...................1111111.....111.............1111..111............1111........................................................
    .................111111111....................................................11111..111.............111........................................................
    .................1111111111111111...........................................111111..............................................................................
    ................111111111111111111111....................................11111111...............................................................................
    ................1111....1111111111111....................................1111111................................................................................
    ...............1111............111111....................................11111..................................................................................
    ...............1111...............111..............................111..........................................................................................
    ...............111................................................1111..........................................................................................
    ..............11111111...................111......................1111..............111.........................................................................
    ..............111111111111111............111......................111...............111.........................................................................
    ..............111.111111111111111........111......................111..............1111.........................................................................
    ..............111...1111111111111.................................111.......1111111111111111....................................................................
    .............1111..........111111.................................111.......1111111111111111....................................................................
    .............1111.................................................111.......1111111111111111........11111111....................................................
    .............111.........................111.....................1111..1111.......1111...111.......1111111111...................................................
    .............111.........................111........11111111.....11111111111......111..............11111111111..................................................
    .............111.........................111.......11111111111...111111111111.....111..............1111..11111..................................................
    .............111.........................111.......111111111111..1111111111111....111.............1111.....1111....111..........................................
    .............111.........................111......1111....11111..111111...1111....111.............1111.....1111....111..........................................
    .............111.........................111......1111....11111..11111.....111...1111............1111.......111....111..........................................
    .............111.........................111......111...1111111...1111.....111...1111............111111111..111....111..........................................
    .............111.........................111......111..11111111...111......111...11111...........111.111111.111...11111111111111................................
    .............111.........................111......111.111111111............111...1111111.........111.1111111111...111111111111111...............................
    .....................7777777777..........111......11111111..1111...........111....1111111111....1111....1111111...111111111111111...............................
    ....................77777777777..........111......1111111...1111...........111......111111111...1111.....111111...111.........111...............................
    ...................777777777777..........111.......11111.....111......................1111111...111........1111...111...........................................
    ...................7777..................111.................111.........................1111...111...............111...........................................
    ...................7777..................111.................111................................111...............111...........................................
    ...................77777.................111.................111................................111...............111...........................................
    ....................77777...................................1111................................111...............111...........................................
    ....................777777.......777.............111111111111111................................1111..............111...........................................
    .....................77777.......777.............111111111111111................................111111............111...........................................
    .......................777......77777777.........11111111111111.................................11111111111.......1111..........................................
    ......................7777......7777777777.......................................................1111111111.......1111..........................................
    ......................7777......7777777777..........................................................1111111........111..........................................
    .....................7777......77777777777.........................................................................111..........................................
    .....................7777......77777...777......................................................................................................................
    ...................777777.....77777....777.................7777.................................................................................................
    ..............7777777777.....77777....7777.....7777777.....7777.................................................................................................
    ............77777777777......7777....77777...777777777.....7777.................................................................................................
    ............777777777.......7777....77777....7777777777....7777.................................................................................................
    ............7777............7777....77777...77777..7777....7777.................................................................................................
    ............................777....77777....7777...7777....777..................................................................................................
    ............................777....7777.....7777...7777....777..........7777777777..............................................................................
    ............................777....777......777..777777....777........7777777777777.............................................................................
    ............................................77777777777....777........7777777777777.............................................................................
    ............................................77777777777...7777.77777..7777.....7777.............................................................................
    ............................................77777777777...7777.77777..777.......777.............................................................................
    ............................................77777..7777...7777777777..777.......777.............................................................................
    ...................................................7777...77777777....7777.....7777.............................................................................
    ...................................................777....77777777....7777777777777.............................................................................
    ...................................................777.........7777....77777777777..............................................................................
    ...............................................................77777...7777777777...............................................................................
    .............................ddddddd............................7777....77777...................................................................................
    ............................ddddddddddd.........................7777....7777777.................................................................................
    ..........................ddddddddddddddd........................777......7777777...............................................................................
    ..........................ddddd...dddddddd................ddd..............7777777..............................................................................
    ........................dddddd......ddddddd..............dddd................7777777............................................................................
    ........................ddddd..........dddd.............ddddd.................777777............................................................................
    .......................ddddd...........ddddd............dddd....................7777............................................................................
    .......................dddddd...........dddd............ddd.....................................................................................................
    .......................ddddddd..........dddd............ddd.....................................................................................................
    .......................ddddddddddddddd.ddddd...........dddd.....................................................................................................
    .......................ddddddddddddddddddddd...........dddd.......ddd...........................................................................................
    .......................dddd.ddddddddddddddd...........dddd........ddd..............................ddd..........................................................
    ........................dddd........ddddd.............dddd........ddd..............................ddd..........................................................
    ........................dddd..........................ddd..........................................ddd..........................................................
    .........................dddd.........................ddd.......................................................................................................
    .........................ddddd...............dddddddddddd.....................ddd............................dddddddddddd......ddd..............................
    ..........................ddddd.............ddddddddddddd.......ddd...........ddd............................dddddddddddd......ddd..............................
    ...........................ddddd............dddddddddddd.......dddd...........ddd.ddd.............ddd.......dddddddddddddd.....ddddddddddd......................
    ...........................ddddddd.........dddd......ddd......ddddd.......ddddddddddd.............ddd.......dddd......dddd.....dddddddddddd.....................
    ............................ddddddddddddd..dddd......ddd......dddd.......dddddddddddd.............ddd......dddd........ddd...ddddddddddddddd....................
    ..............................ddddddddddd..dddd.....dddd.....dddd........dddddddddddd.............ddd......dddd........ddd...ddddddd...dddddd...................
    ................................ddddddddd...dddd....dddd.....dddd........ddd.ddd..................ddd......ddd.........ddd...ddddd.......dddd...................
    ............................................dddddd..ddd.....dddd.............ddd..................ddd......ddd.........ddd....ddd........dddd...................
    .............................................dddddddddd....ddddd.............dddd.................ddd......ddd.........ddd....ddd.........ddd...................
    ..............................................ddddddddd....dddd..............ddddd................ddd......dddd.......dddd....ddd.........ddd...................
    ...............................................dddddddd....ddd................dddddddd............ddd......dddddd....ddddd....ddd.........ddd...................
    ...........................................................ddd.................dddddddddddd.......ddd......ddddddddddddddd....ddd........dddd...................
    ................................................................................ddddddddddd.......ddd.......ddddddddddddd.....ddd........dddd...................
    ....................................................................................ddddddd....................dddddddd.......ddd.......ddddd...................
    ..............................................................................................................................ddd.......dddd....................
    ........................................................................................................................................dddd....................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    `, SpriteKind.Decoration)
game.onUpdate(function () {
    for (let value of spriteutils.getSpritesWithin(SpriteKind.Enemy, 50, mySprite)) {
        value.follow(mySprite, 25)
        sprites.setDataBoolean(value, "Woke up", true)
        character.loopFrames(
        value,
        [img`
            . . . . c c c c c c c . . . . . 
            . . . c 6 7 7 7 7 7 6 c . . . . 
            . . c 6 7 c 6 6 6 6 c 7 c . . . 
            . . c 7 7 6 f 6 6 f 6 7 6 c . . 
            . . c 7 7 7 7 7 7 7 7 7 7 c . . 
            . . f 7 7 7 6 1 f f 1 8 7 f . . 
            . . f 7 7 7 f 1 f f 1 f 6 f . . 
            . . f 6 7 7 f 2 2 2 2 f f . . . 
            . . c f 6 7 7 2 2 2 2 f c c . . 
            . c 7 7 c c 7 7 7 7 7 7 7 7 c . 
            c 7 7 7 6 c f 7 7 7 7 1 1 1 7 c 
            c c 6 6 6 c c f 6 7 1 1 1 1 1 f 
            . . c 6 6 6 c 6 6 1 1 1 1 1 1 f 
            . . c 6 6 6 6 6 6 1 1 1 1 1 6 f 
            . . . c 6 6 6 6 1 1 1 1 1 6 f . 
            . . . . c c c c c c c c f f . . 
            `,img`
            . . . c c c c c c c . . . . . . 
            . . c 7 f f 6 6 f f c . . . . . 
            . c 6 7 6 6 6 6 6 6 7 c . . . . 
            . c 7 7 7 7 7 7 7 7 7 7 c . . . 
            . c 7 7 7 6 1 f f 1 8 7 c . . . 
            . f 7 7 7 f 1 f f 1 f 6 f . . . 
            . f 7 7 7 f 2 2 2 2 f 6 f . . . 
            . f 6 7 7 f 2 2 2 2 f 6 c c . . 
            . . c f 7 7 2 2 2 2 7 7 7 7 c . 
            . c 7 7 c c 7 7 7 7 7 1 1 1 7 c 
            c 7 7 7 6 c f 7 7 7 1 1 1 1 1 f 
            c c 6 6 6 c c f 6 1 1 1 1 1 1 f 
            . . c 6 6 6 c 6 6 1 1 1 1 1 6 f 
            . . c 6 6 6 6 6 6 1 1 1 1 1 6 f 
            . . . c 6 6 6 6 6 1 1 1 1 6 f . 
            . . . . c c c c c c c c f f . . 
            `,img`
            . . . c c c c c c c . . . . . . 
            . . c 7 f f 6 6 f f c . . . . . 
            . c 6 7 6 6 6 6 6 6 7 c . . . . 
            . c 7 7 7 7 7 7 7 7 7 7 c . . . 
            . c 7 7 7 6 1 f f 1 8 7 c . . . 
            . f 7 7 7 f 1 f f 1 f 6 f . . . 
            . f 7 7 7 f 2 2 2 2 f 6 f . . . 
            . f 6 7 7 f 2 2 2 2 f 6 c c . . 
            . . c f 7 7 2 2 2 2 7 7 7 7 c . 
            . c 7 7 c c 7 7 7 7 7 1 1 1 7 c 
            c 7 7 7 6 c f 7 7 7 1 1 1 1 1 f 
            c c 6 6 6 c c f 6 1 1 1 1 1 1 f 
            . . c 6 6 6 c 6 6 1 1 1 1 1 6 f 
            . . c 6 6 6 6 6 6 1 1 1 1 1 6 f 
            . . . c 6 6 6 6 6 1 1 1 1 6 f . 
            . . . . c c c c c c c c f f . . 
            `,img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            c c c c c . . . . . . . . . . . 
            c 6 7 7 7 c c . . . . . . . . . 
            . c c 7 7 7 c c . . . . . . . . 
            . . . c 7 7 6 c . . . . . . . . 
            . . . c 6 6 6 c . . . . . . . . 
            . . c c 6 6 6 c c c c c c . . . 
            . c 6 6 6 c c 6 7 7 7 7 6 c . . 
            c c 6 6 6 c 7 7 7 7 7 7 7 7 c . 
            c 6 6 6 c 6 7 7 7 7 7 7 7 7 6 c 
            c 6 6 6 c 7 7 7 c 6 6 6 6 c 7 c 
            c 6 6 6 f 7 7 7 c c 6 6 c c 7 f 
            c 6 6 6 f 7 7 7 6 f 6 6 f 6 7 f 
            . c c 6 6 f 6 7 c 1 f f c 1 c . 
            . . . c c c c c c c c c c c c . 
            `,img`
            c c c c c . . . . . . . . . . . 
            c 6 7 7 7 c c . . . . . . . . . 
            . c c 7 7 7 c c . . . . . . . . 
            . . . c 7 7 6 c . . . . . . . . 
            . . . c 6 6 6 c . . . . . . . . 
            . . c c 6 6 6 c . . . . . . . . 
            . c c 6 6 6 c c c c c c c . . . 
            . c 6 6 6 c c 6 7 7 7 7 6 c . . 
            c c 6 6 6 c 7 7 7 7 7 7 7 7 c . 
            c 6 6 6 c 6 7 7 7 7 7 7 7 7 6 c 
            c 6 6 6 c 7 7 7 c 6 6 6 6 c 7 c 
            c 6 6 6 f 7 7 7 c c 6 6 c c 7 f 
            c 6 6 6 f 7 7 7 6 f 6 6 f 6 7 f 
            . c 6 6 f 6 7 7 7 7 7 7 7 7 f . 
            . c c 6 6 f 6 7 c 1 f f c 1 c . 
            . . . c c c c c c c c c c c c . 
            `,img`
            c c c c c . . . . . . . . . . . 
            c 6 7 7 7 c c . . . . . . . . . 
            . c c 7 7 7 c c . . . . . . . . 
            . . . c 7 7 6 c . . . . . . . . 
            . . . c 6 6 6 c . . . . . . . . 
            . . c c 6 6 6 c . . . . . . . . 
            . c c 6 6 6 c c c c c c c . . . 
            . c 6 6 6 c c 6 7 7 7 7 6 c . . 
            c c 6 6 6 c 7 7 7 7 7 7 7 7 c . 
            c 6 6 6 c 6 7 7 7 7 7 7 7 7 6 c 
            c 6 6 6 c 7 7 7 c 6 6 6 6 c 7 c 
            c 6 6 6 f 7 7 7 c c 6 6 c c 7 f 
            c 6 6 6 f 7 7 7 6 f 6 6 f 6 7 f 
            . c 6 6 f 6 7 7 7 7 7 7 7 7 f . 
            . c c 6 6 f 6 7 c 1 f f c 1 c . 
            . . . c c c c c c c c c c c c . 
            `],
        100,
        character.rule(Predicate.MovingRight)
        )
        character.loopFrames(
        value,
        [img`
            . . . . . c c c c c c c . . . . 
            . . . . c 6 7 7 7 7 7 6 c . . . 
            . . . c 7 c 6 6 6 6 c 7 6 c . . 
            . . c 6 7 6 f 6 6 f 6 7 7 c . . 
            . . c 7 7 7 7 7 7 7 7 7 7 c . . 
            . . f 7 8 1 f f 1 6 7 7 7 f . . 
            . . f 6 f 1 f f 1 f 7 7 7 f . . 
            . . . f f 2 2 2 2 f 7 7 6 f . . 
            . . c c f 2 2 2 2 7 7 6 f c . . 
            . c 7 7 7 7 7 7 7 7 c c 7 7 c . 
            c 7 1 1 1 7 7 7 7 f c 6 7 7 7 c 
            f 1 1 1 1 1 7 6 f c c 6 6 6 c c 
            f 1 1 1 1 1 1 6 6 c 6 6 6 c . . 
            f 6 1 1 1 1 1 6 6 6 6 6 6 c . . 
            . f 6 1 1 1 1 1 6 6 6 6 c . . . 
            . . f f c c c c c c c c . . . . 
            `,img`
            . . . . . . c c c c c c c . . . 
            . . . . . c f f 6 6 f f 7 c . . 
            . . . . c 7 6 6 6 6 6 6 7 6 c . 
            . . . c 7 7 7 7 7 7 7 7 7 7 c . 
            . . . c 7 8 1 f f 1 6 7 7 7 c . 
            . . . f 6 f 1 f f 1 f 7 7 7 f . 
            . . . f 6 f 2 2 2 2 f 7 7 7 f . 
            . . c c 6 f 2 2 2 2 f 7 7 6 f . 
            . c 7 7 7 7 2 2 2 2 7 7 f c . . 
            c 7 1 1 1 7 7 7 7 7 c c 7 7 c . 
            f 1 1 1 1 1 7 7 7 f c 6 7 7 7 c 
            f 1 1 1 1 1 1 6 f c c 6 6 6 c c 
            f 6 1 1 1 1 1 6 6 c 6 6 6 c . . 
            f 6 1 1 1 1 1 6 6 6 6 6 6 c . . 
            . f 6 1 1 1 1 6 6 6 6 6 c . . . 
            . . f f c c c c c c c c . . . . 
            `,img`
            . . . . . . c c c c c c c . . . 
            . . . . . c f f 6 6 f f 7 c . . 
            . . . . c 7 6 6 6 6 6 6 7 6 c . 
            . . . c 7 7 7 7 7 7 7 7 7 7 c . 
            . . . c 7 8 1 f f 1 6 7 7 7 c . 
            . . . f 6 f 1 f f 1 f 7 7 7 f . 
            . . . f 6 f 2 2 2 2 f 7 7 7 f . 
            . . c c 6 f 2 2 2 2 f 7 7 6 f . 
            . c 7 7 7 7 2 2 2 2 7 7 f c . . 
            c 7 1 1 1 7 7 7 7 7 c c 7 7 c . 
            f 1 1 1 1 1 7 7 7 f c 6 7 7 7 c 
            f 1 1 1 1 1 1 6 f c c 6 6 6 c c 
            f 6 1 1 1 1 1 6 6 c 6 6 6 c . . 
            f 6 1 1 1 1 1 6 6 6 6 6 6 c . . 
            . f 6 1 1 1 1 6 6 6 6 6 c . . . 
            . . f f c c c c c c c c . . . . 
            `,img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . c c c c c 
            . . . . . . . . . c c 7 7 7 6 c 
            . . . . . . . . c c 7 7 7 c c . 
            . . . . . . . . c 6 7 7 c . . . 
            . . . . . . . . c 6 6 6 c . . . 
            . . . c c c c c c 6 6 6 c c . . 
            . . c 6 7 7 7 7 6 c c 6 6 6 c . 
            . c 7 7 7 7 7 7 7 7 c 6 6 6 c c 
            c 6 7 7 7 7 7 7 7 7 6 c 6 6 6 c 
            c 7 c 6 6 6 6 c 7 7 7 c 6 6 6 c 
            f 7 c c 6 6 c c 7 7 7 f 6 6 6 c 
            f 7 6 f 6 6 f 6 7 7 7 f 6 6 6 c 
            . c 1 c f f 1 c 7 6 f 6 6 c c . 
            . c c c c c c c c c c c c . . . 
            `,img`
            . . . . . . . . . . . c c c c c 
            . . . . . . . . . c c 7 7 7 6 c 
            . . . . . . . . c c 7 7 7 c c . 
            . . . . . . . . c 6 7 7 c . . . 
            . . . . . . . . c 6 6 6 c . . . 
            . . . . . . . . c 6 6 6 c c . . 
            . . . c c c c c c c 6 6 6 c c . 
            . . c 6 7 7 7 7 6 c c 6 6 6 c . 
            . c 7 7 7 7 7 7 7 7 c 6 6 6 c c 
            c 6 7 7 7 7 7 7 7 7 6 c 6 6 6 c 
            c 7 c 6 6 6 6 c 7 7 7 c 6 6 6 c 
            f 7 c c 6 6 c c 7 7 7 f 6 6 6 c 
            f 7 6 f 6 6 f 6 7 7 7 f 6 6 6 c 
            . f 7 7 7 7 7 7 7 7 6 f 6 6 c . 
            . c 1 c f f 1 c 7 6 f 6 6 c c . 
            . c c c c c c c c c c c c . . . 
            `,img`
            . . . . . . . . . . . c c c c c 
            . . . . . . . . . c c 7 7 7 6 c 
            . . . . . . . . c c 7 7 7 c c . 
            . . . . . . . . c 6 7 7 c . . . 
            . . . . . . . . c 6 6 6 c . . . 
            . . . . . . . . c 6 6 6 c c . . 
            . . . c c c c c c c 6 6 6 c c . 
            . . c 6 7 7 7 7 6 c c 6 6 6 c . 
            . c 7 7 7 7 7 7 7 7 c 6 6 6 c c 
            c 6 7 7 7 7 7 7 7 7 6 c 6 6 6 c 
            c 7 c 6 6 6 6 c 7 7 7 c 6 6 6 c 
            f 7 c c 6 6 c c 7 7 7 f 6 6 6 c 
            f 7 6 f 6 6 f 6 7 7 7 f 6 6 6 c 
            . f 7 7 7 7 7 7 7 7 6 f 6 6 c . 
            . c 1 c f f 1 c 7 6 f 6 6 c c . 
            . c c c c c c c c c c c c . . . 
            `],
        100,
        character.rule(Predicate.MovingLeft)
        )
    }
})
game.onUpdate(function () {
    if (started) {
        console.logValue("Live", statusbar.value)
        if (sprites.allOfKind(SpriteKind.Enemy).length == 0) {
            Wave2()
        }
    }
})
game.onUpdateInterval(2000, function () {
    for (let value of sprites.allOfKind(SpriteKind.Enemy)) {
        if (sprites.readDataBoolean(value, "Woke up")) {
            projectile2 = sprites.createProjectileFromSprite(img`
                . 8 9 8 . 
                8 1 9 1 8 
                9 9 f 9 9 
                8 1 9 1 8 
                . 8 9 8 . 
                `, value, 0, 0)
            spriteutils.setVelocityAtAngle(projectile2, spriteutils.angleFrom(mySprite, value), 0 - Speed_of_Projecile)
            projectile2.setKind(SpriteKind.EnemyProjectile)
        }
    }
})
